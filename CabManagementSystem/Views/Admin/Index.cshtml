@using Microsoft.EntityFrameworkCore;
@using CabManagementSystem.AppContext;
@{
    Layout = "~/Views/Shared/_LayoutHeader.cshtml";
    string? PathSerialization = "D:/CabManagementSystem/CabManagementSystem/Data/Json/taxi.json";
    ApplicationContext applicationContext = new(new DbContextOptions<ApplicationContext>());
    TaxiContext taxiContext = new(new DbContextOptions<TaxiContext>());
}
@model UserModel
<title>Admin Panel</title>

<div class="container">
    <form method="post" asp-controller="Admin" asp-action="AddTaxi" id="add-taxi-id">
        <div>
            <label asp-for="Taxi.TaxiClass"></label><br />
            <input value="" asp-for="Taxi.TaxiClass" id="taxi-taxiclass" />
        </div>
        <div>
            <label asp-for="Taxi.TaxiNumber"></label><br />
            <input value="" asp-for="Taxi.TaxiNumber" id="taxi-taxinumber" />
        </div>
        <div>
            <label asp-for="Taxi.DriverID"></label><br />
            <input value="" asp-for="Taxi.DriverID" id="taxi-driver-id" />
        </div>
        <input type="submit" value="Add Taxi" id="submit-button-add-taxi" />
    </form>
    <form method="post" asp-controller="Admin" asp-action="EditTaxi">
        <div>
            <label asp-for="Taxi.ID"></label><br />
            <input value="" asp-for="Taxi.ID" />
        </div>
        <div>
            <label asp-for="Taxi.TaxiClass"></label><br />
            <input value="" asp-for="Taxi.TaxiClass" />
        </div>
        <div>
            <label asp-for="Taxi.TaxiNumber"></label><br />
            <input value="" asp-for="Taxi.TaxiNumber" />
        </div>
        <input type="submit" value="Edit Taxi" />
    </form>
    <form method="post" asp-controller="Admin" asp-action="DeleteTaxi">
        <div>
            <label asp-for="Taxi.ID"></label><br />
            <input value="" asp-for="Taxi.ID" />
        </div>
        <input type="submit" value="Delete Taxi" />
    </form>
</div>
<script>
    $.click().ajax({
        url: @Html.Raw(@Url.Action("GetTaxi", "Admin")),
        type: "GET",
        dataType: "json",
        success: function (data) {
            var taxi = JSON.parse(data);
            $("#taxi-taxiclass").val(taxi.TaxiClass);
            $("#taxi-taxinumber").val(taxi.TaxiNumber);
            $("#taxi-driver-id").val(taxi.DriverID);
        }
    });
</script>
<script src="~/js/GetData.js"></script>
